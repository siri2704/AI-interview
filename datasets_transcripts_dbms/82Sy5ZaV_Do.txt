[Music] all right guys so we're going to get started learning about databases and how to actually persist our user data now here's the problem previously in the last challenge when we built our blog website you would have noticed that every single time that you restarted your server so for example at the moment I'm using node app.js to run my app.js file and my server is running on Port 3000 but if I use contrl C to stop running and then I rerun my app now if I head back to my blog the post that I added previously will now be removed as soon as I hit refresh and the reason behind this is because inside app.js we're using an array to store all of that post data and we don't have have any way of persistently storing the data that the user generates for example new blog posts or new comments or new user signups now it's not just our website that's generating data if you take a look at internet livestats tocom you can see just how much data is being generated as we speak if you look at the total number of Google searches today not even you know of all time you can see how quick L that number moves and how many emails are sent or how many blog posts were written today it's an absolutely huge amount of data that's being generated all across the internet and they all need to be saved somewhere that's why we need to know about databases once you realize the need for databases the next step is actually choosing one and if you look on the internet this is actually not an easy task because there are so many databases out there even if you narrow it down to the databases that work well with node.js you're still left with a lot of choice and very frequently I come across blog posts that have a title that's something like this Cassandra versus mongod DB versus couch DB versus and it's just crazy the amount of choice that you have but there's a reason for that because depending on the type of data you're looking to store and the structure of your data you might favor one of these databases over or another but no matter what choice you make the main difference between databases is whether if they are sql-based or if they are nosql based now SQL or SQL stands for structured query language and it's a really old school piece of technology that businesses have been using for many many years now nosql stands for not only structured query language so they can actually be any format as long as it's not SQL although most of them follow a very similar structure those are the two big families of databases that you get to choose from and we're going to talk about the differences between each and I'm going to show you how to work with both of these types of databases if you do a quick Google you will find that there are so many different types of databases that are categorized as SQL databases or nosql but the top four most popular databases at least when we're working with node.js for the SQL family that's MySQL and postgress and for nosql it's going to be mongodb and redis now some of these databases you might have already heard of but a lot of people are confused as to when to use which and what are the similarities and differences and how do you choose anyways so let's talk about what are the differences between SQL and nosql the first difference is in their structure so let's say that you're starting a new business and you've decided to start selling stationary now because you're shipping a lot of your product to your customers you need to keep a record of their names and addresses so you create a database for that and if you're used to Excel and creating tables then you'll find that a SQL database will serve you quite well a SQL database Will Group your data into tables so this is how our customer data would look if we chose a SQL database such as MySQL or postgress but sometimes you might find that SQL databases can be extremely inflexible for example let's say that in your shop you have me as a customer and I'm one of those annoying customers who don't really like having mail sent to my address so I say to you you know what why don't you deliver to my address but for all other Communications I want you to just email me because we are after all in the 21st century right if you had a SQL table then you have a bit of a problem because that doesn't really fit with your table you don't have a pre-specified email column to fit that data and none of your existing data have an email entry and what if you had a customer who didn't want to give you any information at all they didn't want to give you their address or their email and they'd rather protect their privacy well then you kind of have a gap in your table and it ends up looking very very irregular and that doesn't sit very well with SQL databases so if you chose a SQL database what it will try to do is it will try to square off this table so you can add a new column called email but for all the places where there's missing information it will automatically insert a null and as we learned from previous programming lessons null can be very dangerous especially if you're not expecting something to be null or not have any data for example if you decide to send out your marketing emails a lot of those emails are going to be going to an email address that's called null right but if you had a nosql based database such as mongod DB then this wouldn't be a problem at all if you were working with the same data would be represented as Json objects so you would have key value pairs such as first name last name address and if for one of those documents you had an extra key value pair such as email then it doesn't affect any of the other data records and none of these records or documents actually have to be the same shape or follow the same structure if you're old enough to remember that ad with PC guy and Mac guy it's kind of the same with SQL and nosql nosql databases tend to be flashier newer with modern syntax and modern methods but SQL database is old and reliable and it likes structure everybody knows that guy who they work with in the office off who really likes structure and for everybody to follow rules and to specify a structure ahead of time and just stick to it but with no SQL and especially mongod DB you're more flexible you're able to adapt and maneuver around the situation as and when things come up so it's really helpful for startups where your data structure is not predefined you know one day you could be selling toasters and tomorrow you could be pivoting to giving massages then a nosql database can remain flexible and you're not bound to a particular structure but even though the nosql guy is flashy and he's new and he's hip you know I'm sure you've met people like this and I've met a lot of nosql guys in my time and what they're not good at are relationships and this is another big difference between SQL and nosql databases in the way that they Implement relationships between your data although previously we were comparing between SQL and nosql databases you'll also often hear people refer to them as relational and non-relational databases and this is the Highlight that SQL databases are really good at establishing relationships between your data coming back to our shop let's say that you wanted to keep a record of all of the orders that are being made so you want to know what's the name of the customer who bought it what's their address what did they buy what was the price of the product how many of it did they buy all of these things but it doesn't really make sense to cram it all into the same table especially if that same customer comes back and buys a different product then you have a lot of repeated data and it doesn't make any sense to cram everything into the same table right using a SQL database what you would do is you would group related pieces of data into individual tables so you might have a customer table a product table and an order table and in your database you can specify a relationship between the tables so for example you could link up the customer's table through the customer ID to the orders table and you could link the products table to the product ID in the orders table if we had some real data for example we have a database of all of our customers and where they live we have a table of our products and what their prices are and we also have this orders table which links up the data in the different tables let's say we have an order with order ID one our very first order we can have a column where we specify the customer ID so in this case it's linked to the customer customer that has an ID of two so that is of course me right customer 2 is Angela U now the next column saves the product ID so this links to the products table with the product that has an ID of two by using this format we can join the tables together at a later point if need be so we can know for each order which customer Bo and which products were bought Now using a nosql database such as mongodb you have to rethink how you organize your data in this case we might have a document where we have an order ID we have a key value pair that's a customer with customer as the key and their details as the value and also the product as its own embedded object so now we have embedded objects in order to represent the entire order and this might lead to some data repetition so you could also organize your data in different documents right so say you have three objects one has details of the order one has details of the customer and one has details of the product and you can also link them together although a little bit more clumsily through using references so for example in the order document you can see the customer references the document with a person ID of person one and the product references a product with the ID of product one so this is how you might Implement your relationships in a nosql database such as mongodb but it's a little bit clumsy and when you start searching this database that's structured like this it might not be quite as efficient or fast as a SQL database so depending on the structure of your data you will want to choose a SQL or a nosql database and you should know very often you will see on the internet people saying mongodb is the best database out there ever and other people will say don't ever use mongodb it's the worst or you know MySQL is the best thing since sliced bread don't believe what people say instead you have to know what your particular situation is to choose the right database if you need to store data such as orders customer details products inventory things that have lots of relationships between each other then you might be better off choosing a SQL database such as MySQL however if you have a website where you have something that's more of a one to many kind of relationship like here for example say if we were making a database for Instagram then we might have a username a first name last name and then we might have a post array and so this is an array of objects and those objects each have an image URL description and the date that they were created in this case where you have a single user generating lots of content creating a one user to many posts relationship then this is much easier to map out using something like mongodb the last difference I want to talk about is scalability despite it being relatively weak on the relationship front one of the reasons why you might use nosql over SQL is because of scalability this is a real strong point of nosql databases and this is a reason why you might choose a nosql database over a SQL database if you've ever had an Excel spreadsheet that has lots and lots of rows so say 10,000 plus rows then you might have experienced this it gets slower and slower the more rows of data you add until a point where the file is so big that your computer can no longer handle it and you might get a popup saying Excel cannot complete this task with available resources choose less data or close other applications it's saying that you you need a more powerful computer if you are running your SQL database on your laptop for example then you might just get a more powerful computer say a desktop computer with higher specs right and once that starts slowing down and struggling then you might just go for a Mainframe and buy the biggest computer that you can find but as we saw previously there are some companies that have so much data for example the number of websites that Google has to index and be able to serve up in searches is in the bazillions and they have so much data that even the fastest computer will slow down and struggle managing large amounts of data using sql-based databases is kind of like scaling a building vertically as soon as you have more data you just add floors onto your building until eventually you end up with this skyscraper of a build building it might just become unstable and end up collapsing on you and it's also very costly to scale vertically like this now because of the way that mongodb organizes its data into smaller chunks or smaller documents of data where essentially each record or each row in the table is represented as a Json object then in this case instead of buying larger and larger computers it allows for a distributed system so your database can be distributed amongst lots and lots of different computers and this is equivalent to building low but sturdy buildings and you scale horizontally so you build lots and lots of those and all the data is distributed and spread out amongst all of them so if we were to compare the most popular SQL database which is MySQL against the most popular nosql database which is mongodb then these are some of the pros and cons of each SQL databases have been around for ages that means that the technology is more mature but also if you come across anything that's SQL related on the internet it all looks like it was created in the '90s mongodb is shiny and new but as we're finding out some of the things are not really ironed out that might mean more frequent changes in the technology as they find new problems and address them the next difference is that SQL databases run on a table structure as we've seen before whereas mongodb works with a document structure so this way individual rows of data can be each represented as a document and this leads us on to the next point with a SQL database you should have a structure in mind before you create your database and this in dat database lingo is called a schema so these are the names of your columns and the names of your tables and how many columns you might need and SQL databases work really well if you have a fixed schema so if you already know ahead of time what your customer database will look like what your orders database will look like and you know that they're not likely to change whereas with something like mongodb and other no SQL databases they're more flexible to changes so if you're young startup and you haven't really figured out how you're going to organize your data or what kinds of data you're going to store then it might be a better idea to choose this particular type of database but as we saw earlier on if you need to store data with a lot of relationships between the data then a SQL database will work out to be much faster when you query through your database whereas with something like mongod DB it can manage simple relationships but it's really not great when those relationships start to get complex and when you have data in mongodb that's linked up with complex relationships the speed and efficiency can quickly go down the last Point as we mentioned earlier on is that SQL databases tend to scale vertically so you tend to need more infrastructure it's more costly whereas with mongodb and other nosql databases they can scale horizontally and allows for a more distributed structure which makes it much easier to scale so this is your introduction for working with databases and especially looking at the differences between the two major families SQL and nosql databases now in the coming lessons we're going to explore in a more Hands-On way the differences between SQL and nosql so that you can try out and see for yourself how they each work and experience some of the frustrations as well as the benefits of each so for all of that and more I'll see you on the next lesson